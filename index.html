<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Arizona Relativity Group</title>

    <!-- Tailwind (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Proxima Nova via Adobe Fonts (your kit) -->
    <style>
        @import url("https://use.typekit.net/qke6kvg.css");
    </style>

    <style>
        @import url("https://use.typekit.net/qke6kvg.css");

        :root {
            --ua-red: #AB0520;
            --ua-blue: #002147;
        }

        body {
            font-family: "proxima-nova", "Proxima Nova", -apple-system, system-ui, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }

        /* Circular avatar gradient (for members) */
        .gradient-placeholder {
            background:
                radial-gradient(140% 140% at 30% 30%, var(--ua-blue) 0%, rgba(12, 35, 75, 0.85) 45%, transparent 70%),
                radial-gradient(140% 140% at 75% 35%, rgba(171, 5, 32, 0.9) 0%, rgba(171, 5, 32, 0.6) 45%, transparent 70%),
                linear-gradient(135deg, var(--ua-blue), var(--ua-red));
            background-size: cover;
            background-position: center;
        }

        /* Landscape header gradient (for project/pillar/highlight headers) */
        .header-placeholder {
            background:
                radial-gradient(120% 100% at 20% 30%, rgba(12, 35, 75, 0.75), transparent 60%),
                radial-gradient(120% 100% at 80% 35%, rgba(171, 5, 32, 0.70), transparent 60%),
                linear-gradient(135deg, rgba(0, 33, 71, 0.6), rgba(171, 5, 32, 0.55));
            background-size: cover;
            background-position: center;
        }

        #highlights,
        #pillarsGrid,
        #projectsGrid {
            align-items: start;
        }

        .member-placeholder {
            flex: 0 0 3rem;
            /* don’t grow or shrink, 3rem wide */
            height: 3rem;
            border-radius: 9999px;
            background: linear-gradient(135deg, var(--ua-blue), var(--ua-red));
        }
    </style>
    <style>
        /* Minimal red/blue blobs + light starfield */
        body::before {
            content: "";
            position: fixed;
            inset: 0;
            z-index: -3;
            background:
                /* More small blobs for texture */
                radial-gradient(900px 500px at 15% 25%, rgba(12, 35, 75, 0.55), transparent 50%),
                radial-gradient(400px 450px at 40% 80%, rgba(12, 35, 75, 0.50), transparent 50%),

                radial-gradient(700px 400px at 90% 30%, rgba(12, 35, 75, 0.45), transparent 50%),
                radial-gradient(400px 420px at 65% 85%, rgba(12, 35, 75, 0.40), transparent 50%),

                radial-gradient(780px 450px at 55% 25%, rgba(171, 5, 32, 0.45), transparent 50%),
                radial-gradient(800px 420px at 80% 75%, rgba(171, 5, 32, 0.40), transparent 50%),

                /* Slight dark overlay to keep text readable */
                rgba(0, 0, 0, 0.25);
        }




        body::after {
            content: "";
            position: fixed;
            inset: 0;
            z-index: -2;
            opacity: .50;
            background-image:
                radial-gradient(1px 1px at 12% 18%, rgba(255, 255, 255, .8) 50%, transparent 51%),
                radial-gradient(1px 1px at 30% 42%, rgba(255, 255, 255, .6) 50%, transparent 51%),
                radial-gradient(1px 1px at 68% 28%, rgba(255, 255, 255, .7) 50%, transparent 51%),
                radial-gradient(1px 1px at 52% 78%, rgba(255, 255, 255, .7) 50%, transparent 51%),
                radial-gradient(1px 1px at 88% 60%, rgba(255, 255, 255, .8) 50%, transparent 51%);
            -webkit-mask-image: radial-gradient(ellipse at center, black 60%, transparent 85%);
            mask-image: radial-gradient(ellipse at center, black 60%, transparent 85%);
        }

        .btn-primary {
            background-color: transparent;
            color: white;
            border: 1px solid var(--ua-red);
            /* thinner outline */
        }

        .btn-primary:hover {
            background-color: rgba(171, 5, 32, 0.4);
            /* subtle transparent red */
        }



        .btn-secondary {
            background-color: transparent;
            color: white;
            border: 1px solid var(--ua-blue);
            /* thin outline */
        }

        .btn-secondary:hover {
            background-color: rgba(12, 35, 75, 0.6);
            /* brighter, more visible UA blue */
        }


        .btn-ghost {
            border: 1px solid rgba(255, 255, 255, .18);
            color: #fff;
        }

        .btn-ghost:hover {
            background: rgba(255, 255, 255, .08);
        }

        .no-scroll {
            overflow: hidden;
        }

        .modal-backdrop {
            background: rgba(0, 0, 0, .82);
        }
    </style>
</head>

<body class="bg-black text-gray-200 min-h-screen flex flex-col">

    <!-- Header -->
    <header class="sticky top-0 z-40 border-b border-white/10 backdrop-blur bg-black/55">
        <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
            <a href="#home" id="logoLink" class="flex items-center gap-3 text-white">
                <div class="h-7 w-7 rounded-full shadow"
                    style="background: radial-gradient(60% 60% at 40% 40%, var(--ua-blue), transparent 70%), conic-gradient(from 120deg at 50% 50%, var(--ua-red), var(--ua-blue));">
                </div>
                <span class="font-bold tracking-wide">Arizona Relativity</span>
            </a>

            <nav class="flex gap-1 text-sm">
                <button type="button" class="px-3 py-2 rounded-md hover:bg-white/10" data-nav="home">Home</button>
                <button type="button" class="px-3 py-2 rounded-md hover:bg-white/10" data-nav="science">Science</button>
                <button type="button" class="px-3 py-2 rounded-md hover:bg-white/10" data-nav="members">Members</button>
                <a href="compass.html" class="px-3 py-2 rounded-md hover:bg-white/10">COMPASS &#8599;</a>
            </nav>
        </div>
    </header>

    <!-- Main -->
    <main class="flex-1">

        <!-- HOME -->
        <section id="home" class="page">
            <!-- Hero -->
            <div class="relative min-h-[40vh] flex items-center">
                <div class="relative z-10 max-w-6xl mx-auto px-4 py-16">
                    <h1 class="text-6xl font-light tracking-wide" style="color: var(--ua-red);">
                        Arizona Relativity Group
                    </h1>
                    <p class="mt-4 max-w-3xl font-light text-lg italic text-gray-200">
                        Gravity • Relativistic Plasmas • Radiation
                    </p>
                    <div class="mt-6 flex gap-3">
                        <button type="button" class="btn-primary rounded-xl px-4 py-2" data-nav="science">Our
                            Science
                        </button>
                        <button type="button" class="btn-secondary rounded-xl px-4 py-2" data-nav="members">Meet the
                            Team
                        </button>
                    </div>
                </div>
            </div>

            <!-- Pillars -->
            <div class="relative z-10 max-w-6xl mx-auto grid md:grid-cols-3 gap-6 px-4 -mt-4" id="pillarsGrid"></div>

            <!-- Highlights -->
            <section class="relative z-10 max-w-6xl mx-auto px-4 mt-14 pb-24">
                <h2 class="text-2xl md:text-3xl font-semibold text-white mb-6">Recent Highlights</h2>
                <div id="highlights" class="grid md:grid-cols-3 gap-6"></div>
            </section>
        </section>

        <!-- MEMBERS -->
        <section id="members" class="page hidden max-w-6xl mx-auto px-4 py-14">
            <div class="mb-6">
                <h2 class="text-2xl md:text-3xl font-semibold text-white">Current Members</h2>
            </div>
            <div id="membersGrid" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6 items-start"></div>

            <div class="mb-6 mt-12">
                <h2 class="text-2xl md:text-3xl font-semibold text-white">Past Members</h2>
            </div>
            <div id="pastMembersGrid" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6 items-start"></div>
        </section>

        <!-- SCIENCE -->
        <section id="science" class="page hidden max-w-6xl mx-auto px-4 py-14">
            <div class="mb-6">
                <h2 class="text-2xl md:text-3xl font-semibold text-white">Science</h2>
            </div>
            <div id="projectsGrid" class="grid md:grid-cols-2 gap-6"></div>

            <div class="mt-10">
                <h3 class="font-semibold text-white">Selected Publications</h3>
                <ul id="pubList" class="mt-3 space-y-2 text-sm text-gray-300"></ul>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="border-t border-white/10">
        <div class="max-w-6xl mx-auto px-4 py-8 text-sm flex flex-wrap gap-3 items-center justify-between">
            <div class="text-gray-400">© <span id="year"></span> Arizona Relativity Group • Steward Observatory</div>
            <div class="flex gap-2">
                <a class="px-3 py-1 rounded-md border border-white/15 bg-white/5 hover:bg-white/10" target="_blank"
                    rel="noopener" href="https://astro.arizona.edu/">Steward Observatory</a>
                <a class="px-3 py-1 rounded-md border border-white/15 bg-white/5 hover:bg-white/10" target="_blank"
                    rel="noopener"
                    href="https://astro.arizona.edu/research-groups/theoretical-astrophysics-program">Theoretical
                    Astrophysics Program</a>
                <a class="px-3 py-1 rounded-md border border-white/15 bg-white/5 hover:bg-white/10" target="_blank"
                    rel="noopener"
                    href="https://ui.adsabs.harvard.edu/search/q=orcid:ORCID_ID_HERE&sort=date%20desc">ADS
                    Publications</a>
            </div>
        </div>
    </footer>

    <!-- Modal -->
    <div id="modal" class="fixed inset-0 hidden z-50 items-center justify-center p-4 modal-backdrop">
        <div id="modalPanel"
            class="relative max-w-2xl w-full rounded-2xl border border-white/15 bg-neutral-900 p-6 shadow-2xl"
            role="dialog" aria-modal="true" aria-labelledby="modalTitle">
            <button id="modalCloseBtn"
                class="absolute top-3 right-3 rounded-md px-2 py-1 text-sm border border-white/20 hover:bg-white/10">Close</button>

            <!-- Edge-to-edge header image for projects/pillars/highlights -->
            <div id="modalHeaderWrap" class="hidden -mx-6 -mt-6 mb-4">
                <div id="modalHeaderPh" class="w-full h-48 md:h-56 header-placeholder rounded-t-2xl"></div>
                <img id="modalHeaderImg" class="block w-full h-48 md:h-56 object-cover rounded-t-2xl hidden"
                    loading="lazy" />
            </div>

            <!-- Avatar + text (avatar hidden for non-members; text always visible) -->
            <div id="modalMemberRow" class="flex items-start gap-4">
                <div id="modalAvatar"
                    class="h-28 w-28 rounded-full border border-white/10 overflow-hidden flex-shrink-0">
                    <img id="modalPhoto" alt="" class="w-full h-full object-cover hidden" loading="lazy" />
                    <div id="modalPlaceholder" class="w-full h-full gradient-placeholder"></div>
                </div>

                <div class="flex-1">
                    <h3 id="modalTitle" class="text-xl font-semibold text-white"></h3>
                    <p id="modalSubtitle" class="text-sm text-gray-300 mt-1"></p>
                    <div id="modalBody" class="mt-4 text-gray-200 text-sm leading-6"></div>
                    <div id="modalLinks" class="mt-4 flex flex-wrap gap-3 text-sm"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        /* ===== DATA ===== */
        const members = [
            {
                name: "Vasileios Paschalidis",
                role: "Professor",
                email: "vpaschal@gmail.com",
                bio: " Things",
                links: { website: "#", scholar: "#" }
            },
            {
                name: "Erik Wessel",
                role: "PhD Candidate",
                email: "ekwessel@arizona.edu",
                bio: "Other things",
                links: { github: "#" }
            },
            {
                name: "M Smith",
                role: "PhD Candidate",
                email: "mamsmith@arizona.edu",
                bio: "also other things",
                links: { linkedin: "#" }
            },
            {
                name: "Mahdi Naseri",
                role: "PhD Candidate",
                email: "mnaseri@arizona.edu",
                bio: "also other things",
                links: { linkedin: "#" }
            },
            {
                name: "Vikram Manikantan",
                role: "PhD Candidate",
                email: "vik@arizona.edu",
                bio: "Binary Black Hole Accretion, Multimessenger Astronomy, Jet Emission",
                photo: "assets/img/members/vikram.jpg",
                photoAlt: "Vikram Manikantan",
                links: { Publications: "https://ui.adsabs.harvard.edu/search/q=author%3A%22Manikantan%2C%20Vikram%22", GitHub: "https://github.com/vikrammanikantan", "Personal Website": "https://www.vikrammanikantan.com" }
            },
        ];

        const pastMembers = [
            {
                name: "Person 1 ",
                role: "Applied Scientist @ Amazon Center for Quantum Computing",
                email: "",
                bio: "",
                links: { website: "https://sbozzolo.github.io/" }
            }
        ];

        const projects = [
            {
                area: "GRMHD",
                title: "Accretion & Jets",
                desc: "MAD/SANE states, jet power maps, spectra.",
                highlights: ["3D GRMHD", "Spectra & polarization"],
                more: "Exploring spin, tilt, and flux-threading dependence.",
                link: "#",
                image: "assets/img/projects/accretion-jets.jpg",
                imageAlt: "Simulated accretion disk and jet"
            },
            {
                area: "Numerical Relativity",
                title: "Binary BH Spacetimes",
                desc: "Matter-coupled evolutions and EM chirps.",
                highlights: ["3+1 evolutions", "Disk cavity dynamics"],
                more: "Predicting pre-merger light curves tied to GW phase.",
                link: "#",
                image: "", /* demonstrates gradient fallback */
                imageAlt: "Visualization of binary black hole spacetime"
            },
        ];

        const highlights = [
            {
                tag: "GRMHD + Radiation Transport",
                title: "Coincident Multimessenger Bursts from Eccentric Supermassive Black Holes",
                blurb: "blurb 1",
                more: "more information about this highlight",
                link: "extras/highlight1.html",
                image: "assets/img/highlights/coincident.jpg",
                imageAlt: "title 1"
            },
            {
                tag: "tag 2",
                title: "title 2",
                blurb: "blurb 2",
                more: "more information about this highlight",
                link: "extras/highlight2.html",
                image: "assets/img/highlights/tilted-disks.jpg",
                imageAlt: "title 2"
            },
            {
                tag: "tag 3",
                title: "title 3",
                blurb: "blurb 3",
                more: "more information about this highlight",
                link: "extras/highlight3.html",
                image: "assets/img/highlights/tilted-disks.jpg",
                imageAlt: "title 3"
            },
        ];

        const pillars = [
            {
                tag: "Numerical Relativity",
                blurb: "Solving Einstein’s equations on a computer to model dynamical spacetimes.",
                details: `
                        <p><strong>What it is:</strong> Numerical Relativity solves Einstein’s field equations using
                        supercomputers. We discretize spacetime (3+1 split) and evolve it in time to study strong-gravity
                        events like black hole or neutron star mergers.</p>
                        <p class="mt-2"><strong>Why it matters:</strong> It predicts the precise gravitational waveforms
                        detected by LIGO/Virgo/KAGRA and provides the spacetime “stage” on which gas and light move.</p>
                        <ul class="mt-3 list-disc pl-5">
                            <li>3+1 formulations (BSSN/CCZ4)</li>
                            <li>Horizon finding & remnant properties</li>
                            <li>Coupling to matter/radiation models</li>
                        </ul>
                        `,
                image: "assets/img/pillars/numerical-relativity.jpg",
                imageAlt: "Numerical relativity visualization"
            },
            {
                tag: "GRMHD",
                blurb: "General-relativistic magnetohydrodynamics of disks and jets around black holes.",
                details: `
                        <p><strong>What it is:</strong> GRMHD models the plasma flowing near black holes, including magnetic
                        fields, shocks, and turbulence—<em>all in curved spacetime</em>.</p>
                        <p class="mt-2"><strong>Why it matters:</strong> It explains how accretion disks feed black holes and
                        how magnetic fields extract spin energy to power relativistic jets.</p>
                        <ul class="mt-3 list-disc pl-5">
                            <li>MAD vs SANE accretion states</li>
                            <li>Jet launching & variability</li>
                            <li>Polarization & radiative transfer links to EHT</li>
                        </ul>
                        `,
                image: "assets/img/pillars/grmhd.jpg",
                imageAlt: "GRMHD simulation"
            },
            {
                tag: "Radiation",
                blurb: "Connecting gravitational waves with electromagnetic and neutrino signals.",
                details: `
                        <p><strong>What it is:</strong> Blurb</p>
                        <p class="mt-2"><strong>Why it matters:</strong> Blurb. </p>
                        <ul class="mt-3 list-disc pl-5">
                            <li>Application 1 </li>
                            <li>Application 2 </li>
                        </ul>
                        `,
                image: "", /* demonstrates gradient fallback */
                imageAlt: "Radiation transport rendering"
            }
        ];

        const publications = [
            "Doe, A. et al. (2025). Jet variability in MAD disks. <i>ApJ</i>. <a class='text-[color:var(--ua-red)] hover:underline' href='#'>arXiv:2501.01234</a>",
            "Rao, K. et al. (2024). EM signatures of SMBBH accretion. <i>MNRAS</i>. <a class='text-[color:var(--ua-red)] hover:underline' href='#'>arXiv:2411.04567</a>",
        ];

        /* ===== UTIL ===== */
        const $ = id => document.getElementById(id);

        /* ===== CARD RENDERERS ===== */
        function renderMembers() {
            const grid = $("membersGrid"); grid.innerHTML = "";
            members.forEach((m, i) => {
                const btn = document.createElement("button");
                btn.type = "button";
                btn.className = "text-left rounded-2xl border border-white/10 bg-white/5 p-5 hover:bg-white/10 transition";
                btn.onclick = () => openMemberModal(i);
                btn.innerHTML = `
                                <div class="flex items-center gap-4">
                                    <!-- Photo circle -->
                                    <img
                                    src="${m.photo || ''}"
                                    alt="${m.photoAlt || m.name || 'Member photo'}"
                                    class="h-12 w-12 rounded-full object-cover border border-white/10"
                                    loading="lazy"
                                    onerror="this.style.display='none'; this.nextElementSibling.style.display='block';"
                                    />
                                    <!-- Gradient fallback if no photo -->
                                    <div class="h-12 w-12 rounded-full hidden"
                                        style="background:linear-gradient(135deg, var(--ua-blue), var(--ua-red));"></div>

                                    <!-- Text info -->
                                    <div>
                                    <h3 class="font-semibold text-white">${m.name}</h3>
                                    <p class="text-sm text-gray-300">${m.role ?? ""}</p>
                                    <p class="text-xs text-gray-400">${m.email ?? ""}</p>
                                    </div>
                                </div>

                                <!-- Bio snippet -->
                                <p class="mt-4 text-sm text-gray-300">${m.bio ?? ""}</p>
                                `;
                grid.appendChild(btn);
            });
        }

        function headerBlock(src, alt, hClass = "h-36") {
            return `
                    <div class="w-full ${hClass} relative overflow-hidden">
                    <div class="absolute inset-0 header-placeholder"></div>
                    ${src ? `<img src="${src}" alt="${alt || ''}"
                        class="block w-full h-full object-cover"
                        onerror="this.style.display='none';">` : ``}
                    </div>
                `;
        }

        function renderProjects() {
            const grid = $("projectsGrid"); grid.innerHTML = "";
            projects.forEach((p, i) => {
                const btn = document.createElement("button");
                btn.type = "button";
                btn.className = "text-left rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 transition overflow-hidden";
                btn.onclick = () => openProjectModal(i);
                btn.innerHTML = `
                            ${headerBlock(p.image, p.imageAlt, "h-36")}
                            <div class="p-5">
                                <div class="text-xs uppercase tracking-widest" style="color: rgba(171,5,32,0.85)">${p.area ?? ""}</div>
                                <h3 class="font-semibold text-white mt-1">${p.title}</h3>
                                <p class="text-sm text-gray-300 mt-2">${p.desc ?? ""}</p>
                                ${p.highlights?.length ? `<ul class="mt-3 list-disc pl-5 text-sm text-gray-300">
                                ${p.highlights.map(h => `<li>${h}</li>`).join("")}
                                </ul>` : ""}
                            </div>`;
                grid.appendChild(btn);
            });
        }

        function renderHighlights() {
            const grid = $("highlights"); grid.innerHTML = "";
            highlights.forEach((h, i) => {
                const btn = document.createElement("button");
                btn.type = "button";
                btn.className = "text-left rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 transition overflow-hidden";
                btn.onclick = () => openHighlightModal(i);
                btn.innerHTML = `
                            ${headerBlock(h.image, h.imageAlt, "h-32")}
                            <div class="p-5">
                                <div class="text-xs uppercase tracking-widest" style="color: rgba(171,5,32,0.85)">${h.tag}</div>
                                <h3 class="mt-1 font-semibold text-white">${h.title}</h3>
                                <p class="mt-2 text-sm text-gray-300">${h.blurb}</p>
                                <div class="mt-3 text-sm text-[color:var(--ua-red)] underline underline-offset-4">Read more</div>
                            </div>
                            `;
                grid.appendChild(btn);
            });
        }

        function renderPubs() {
            $("pubList").innerHTML = publications.map(p => `<li>${p}</li>`).join("");
        }

        function renderPillars() {
            const grid = $("pillarsGrid"); grid.innerHTML = "";
            pillars.forEach((p, i) => {
                const btn = document.createElement("button");
                btn.type = "button";
                btn.className = "text-left rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 transition overflow-hidden";
                btn.onclick = () => openPillarModal(i);
                btn.innerHTML = `
                            ${headerBlock(p.image, p.imageAlt, "h-32")}
                            <div class="p-5">
                                <div class="text-xs uppercase tracking-widest" style="color: rgba(171,5,32,0.85)">${p.tag}</div>
                                <p class="mt-2 text-sm text-gray-300">${p.blurb}</p>
                                <div class="mt-3 text-sm text-[color:var(--ua-red)] underline underline-offset-4">Learn more</div>
                            </div>
                            `;
                grid.appendChild(btn);
            });
        }

        /* ===== MODAL MEDIA HELPERS ===== */
        function setModalAvatar(src, alt = "") {
            const avatar = $("modalAvatar");
            const img = $("modalPhoto");
            const ph = $("modalPlaceholder");
            const row = $("modalMemberRow");
            if (!avatar || !img || !ph || !row) return;

            // Text container (row) is ALWAYS visible; we only toggle the avatar itself
            row.classList.remove("hidden");

            if (src) {
                avatar.classList.remove("hidden");
                img.src = src;
                img.alt = alt || "";
                img.classList.remove("hidden");
                ph.classList.add("hidden");
                img.onerror = () => {
                    img.classList.add("hidden");
                    img.removeAttribute("src");
                    img.alt = "";
                    ph.classList.remove("hidden");
                };
            } else {
                // Hide avatar, keep text visible
                img.classList.add("hidden");
                img.removeAttribute("src");
                img.alt = "";
                ph.classList.remove("hidden");       // keep gradient inside avatar (in case you ever show it)
                avatar.classList.add("hidden");      // hide avatar block for non-members
            }
        }

        function setModalHeader(src, alt = "") {
            const wrap = $("modalHeaderWrap");
            const img = $("modalHeaderImg");
            const ph = $("modalHeaderPh");
            if (!wrap || !img || !ph) return;

            wrap.classList.remove("hidden");
            ph.classList.remove("hidden");

            if (src) {
                img.classList.remove("hidden");
                img.src = src;
                img.alt = alt || "";
                img.onload = () => { ph.classList.add("hidden"); };
                img.onerror = () => {
                    img.classList.add("hidden");
                    img.removeAttribute("src");
                    ph.classList.remove("hidden");
                };
            } else {
                // No image provided: show gradient
                img.classList.add("hidden");
                img.removeAttribute("src");
                ph.classList.remove("hidden");
            }
        }

        function hideModalHeader() {
            const wrap = $("modalHeaderWrap");
            const img = $("modalHeaderImg");
            const ph = $("modalHeaderPh");
            if (!wrap || !img || !ph) return;
            img.classList.add("hidden");
            img.removeAttribute("src");
            ph.classList.remove("hidden");
            wrap.classList.add("hidden");
        }

        /* ===== MODAL OPENERS ===== */
        function showModal() {
            const m = $("modal");
            m.classList.remove("hidden"); m.classList.add("flex");
            document.body.classList.add("no-scroll");
        }
        function closeModal() {
            const m = $("modal");
            m.classList.add("hidden"); m.classList.remove("flex");
            document.body.classList.remove("no-scroll");
            // reset media
            hideModalHeader();
            setModalAvatar(null);
        }

        function openMemberModal(i) {
            const m = members[i];

            hideModalHeader();                                     // no header for members
            setModalAvatar(m.photo, m.photoAlt || m.name || "");   // show avatar

            $("modalTitle").textContent = m.name;
            $("modalSubtitle").textContent = `${m.role ?? ""}${m.email ? " • " + m.email : ""}`;
            $("modalBody").innerHTML = `<p>${m.bio ?? ""}</p>`;

            const links = $("modalLinks"); links.innerHTML = "";
            if (m.links) {
                for (const [k, v] of Object.entries(m.links)) {
                    if (v) links.innerHTML += `<a class="underline text-[color:var(--ua-red)]" target="_blank" rel="noopener" href="${v}">${k[0].toUpperCase() + k.slice(1)}</a>`;
                }
            }
            showModal();
        }

        function openProjectModal(i) {
            const p = projects[i];

            setModalHeader(p.image || null, p.imageAlt || p.title); // header (image or gradient)
            setModalAvatar(null);                                   // hide avatar, keep text

            $("modalTitle").textContent = p.title;
            $("modalSubtitle").textContent = p.area ?? "";
            const body = [`<p>${p.desc ?? ""}</p>`];
            if (p.more) body.push(`<p class="mt-2">${p.more}</p>`);
            if (p.highlights?.length) body.push(`<ul class="mt-3 list-disc pl-5">${p.highlights.map(h => `<li>${h}</li>`).join("")}</ul>`);
            $("modalBody").innerHTML = body.join("");
            $("modalLinks").innerHTML = p.link ? `<a class="underline text-[color:var(--ua-red)]" target="_blank" rel="noopener" href="${p.link}">Learn more</a>` : "";
            showModal();
        }

        function openHighlightModal(i) {
            const h = highlights[i];

            setModalHeader(h.image || null, h.imageAlt || h.title); // header (image or gradient)
            setModalAvatar(null);                                    // no avatar

            $("modalTitle").textContent = h.title;
            $("modalSubtitle").textContent = h.tag ?? "";
            $("modalBody").innerHTML = `<p>${h.blurb ?? ""}</p>${h.more ? `<p class="mt-2">${h.more}</p>` : ""}`;
            $("modalLinks").innerHTML = h.link ? `<a class="underline text-[color:var(--ua-red)]" target="" rel="noopener" href="${h.link}">Learn more</a>` : "";
            showModal();
        }

        function openPillarModal(i) {
            const p = pillars[i];

            setModalHeader(p.image || null, p.imageAlt || p.tag); // header (image or gradient)
            setModalAvatar(null);                                  // hide avatar

            $("modalTitle").textContent = p.tag;
            $("modalSubtitle").textContent = "";
            $("modalBody").innerHTML = p.details;
            $("modalLinks").innerHTML = "";
            showModal();
        }

        /* ===== NAV with hash routing (back/forward support) ===== */
        function showPage(id) {
            document.querySelectorAll(".page").forEach(p => p.classList.add("hidden"));
            (document.getElementById(id) || document.getElementById("home")).classList.remove("hidden");
            document.querySelectorAll("button[data-nav]").forEach(b => {
                if (b.getAttribute("data-nav") === id) b.classList.add("bg-white/10");
                else b.classList.remove("bg-white/10");
            });
        }
        function navigate(id) {
            if (location.hash !== '#' + id) history.pushState({ page: id }, "", "#" + id);
            showPage(id);
        }

        document.addEventListener("DOMContentLoaded", () => {
            // Nav clicks
            document.querySelectorAll("button[data-nav]").forEach(b => {
                b.addEventListener("click", () => navigate(b.getAttribute("data-nav")));
            });

            document.getElementById("logoLink")?.addEventListener("click", (e) => {
                e.preventDefault();
                navigate("home");
            });

            // Year
            const y = document.getElementById("year"); if (y) y.textContent = new Date().getFullYear();

            // Modal interactions
            $("modal").addEventListener("click", closeModal);
            $("modalPanel").addEventListener("click", e => e.stopPropagation());
            $("modalCloseBtn").addEventListener("click", closeModal);
            document.addEventListener("keydown", e => { if (e.key === "Escape") closeModal(); });

            // Render content
            renderPillars();
            renderMembers();
            renderProjects();
            renderHighlights();
            renderPubs();

            // Initial route
            const initial = location.hash ? location.hash.slice(1) : "home";
            showPage(initial);
            if (!location.hash) history.replaceState({ page: initial }, "", "#" + initial);
        });

        window.addEventListener("popstate", (e) => {
            const id = (e.state && e.state.page) || (location.hash ? location.hash.slice(1) : "home");
            showPage(id);
        });

        function openPersonModal(m) {
            hideModalHeader();
            setModalAvatar(m.photo || m.photoLarge || null, m.photoAlt || m.name || "");

            $("modalTitle").textContent = m.name;
            $("modalSubtitle").textContent =
                `${m.role ?? ""}${m.email ? " • " + m.email : ""}${m.now ? " • " + m.now : ""}`;
            $("modalBody").innerHTML = `<p>${m.bio ?? ""}</p>`;

            const links = $("modalLinks"); links.innerHTML = "";
            if (m.links) {
                for (const [k, v] of Object.entries(m.links)) {
                    if (v) {
                        links.innerHTML += `<a class="underline text-[color:var(--ua-red)]" target="_blank" rel="noopener" href="${v}">${k[0].toUpperCase() + k.slice(1)}</a>`;
                    }
                }
            }
            showModal();
        }

        // Keep these for each list
        function openMemberModal(i) { openPersonModal(members[i]); }
        function openPastMemberModal(i) { openPersonModal(pastMembers[i]); }

        function renderMemberGrid(list, gridId, onOpen) {
            const grid = document.getElementById(gridId); grid.innerHTML = "";
            list.forEach((m, i) => {
                const btn = document.createElement("button");
                btn.type = "button";
                btn.className = "text-left rounded-2xl border border-white/10 bg-white/5 p-5 hover:bg-white/10 transition";
                btn.onclick = () => onOpen(i);
                btn.innerHTML = `
                    <div class="flex items-center gap-4">
                        <img src="${m.photo || ''}" alt="${m.photoAlt || m.name || 'Member photo'}"
                            class="h-12 w-12 rounded-full object-cover border border-white/10"
                            loading="lazy"
                            onerror="this.style.display='none'; this.nextElementSibling.style.display='block';" />
                        <div class="member-placeholder hidden"></div>
                        <div>
                        <h3 class="font-semibold text-white">${m.name}</h3>
                        <p class="text-sm text-gray-300">${m.role ?? ""}</p>
                        ${m.now ? `<p class="text-xs text-gray-400">${m.now}</p>` : ""}
                        ${m.email ? `<p class="text-xs text-gray-400">${m.email}</p>` : ""}
                        </div>
                    </div>
                    ${m.bio ? `<p class="mt-4 text-sm text-gray-300">${m.bio}</p>` : ""}
                    `;
                grid.appendChild(btn);
            });
        }

        // Call for both lists when page loads
        document.addEventListener("DOMContentLoaded", () => {
            renderMemberGrid(members, "membersGrid", openMemberModal);
            renderMemberGrid(pastMembers, "pastMembersGrid", openPastMemberModal);
        });
    </script>
</body>

</html>